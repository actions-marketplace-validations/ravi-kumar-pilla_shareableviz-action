# Kedro shareableviz Action

![Kedro Logo Banner - Light](https://raw.githubusercontent.com/kedro-org/kedro/main/.github/demo-dark.png#gh-dark-mode-only)
![Kedro Logo Banner - Dark](https://raw.githubusercontent.com/kedro-org/kedro/main/.github/demo-light.png#gh-light-mode-only)

<br />
<p align="center">

![Kedro-Viz Pipeline Visualisation](https://raw.githubusercontent.com/kedro-org/kedro-viz/main/.github/img/banner.png)

</p>

<p align="center">
✨ <em> Data Science Pipelines. Beautifully Designed</em> ✨
<br />
Live Demo: <a href="https://demo.kedro.org/" target="_blank">https://demo.kedro.org/</a>
</p>

<br />

## Overview

A GitHub action which deploys your Kedro-Viz static site on GitHub pages. This action helps in the automation of a deployment startegy mentioned in [platform agnostic sharing with Kedro-Viz](https://docs.kedro.org/projects/kedro-viz/en/v8.0.1/platform_agnostic_sharing_with_kedro_viz.html#static-website-hosting-platforms-such-as-github-pages)

## Prerequisites

- **GitHub Pages Setup:** Configure your repository for [GitHub Pages](https://docs.github.com/en/pages/quickstart)
- **Directory structure:** This action considers your Kedro-project to be in the root directory
- **Kedro-project dependencies:** Install all the Kedro-project dependencies before using this action in your workflow
- **Python-version:** You need to have an environment with `python>=3.9` in your workflow

## Usage

```yaml

- uses: ravi-kumar-pilla/shareableviz-action@v1
  with:
    # The GitHub token to authenticate deployment. This is autogenerated by the action.
    # Default: ${{ github.token }}
    github_token: ''

    # The GitHub pages publish branch to upload the artifacts.
    # Default: 'gh-pages'
    publish_branch: ''

    # The commit message for the deployment. Defaults to your original commit message.
    # Default: ${{ github.event.head_commit.message }}
    commit_message: ''

    # Your consent to participate in Kedro-Telemetry.
    # Default: true
    telemetry_consent: ''

    # The python version used for the deployment. This should be `>=3.9`
    # Default: '3.11'
    python_version: ''

    # The git config user.name or the owner of the commit.
    # Default: 'github-actions[bot]'
    user_name: ''

    # The git config user.email or the email of the commit owner.
    # Default: 'github-actions[bot]@users.noreply.github.com'
    user_email: ''

```

## Configure the action

1. Adding the GitHub Action to your workflow:

   1. Create a workflow file in your repository: `.github/workflows/shareableviz.yml`
   2. Add the following code to the workflow file:

    ```yaml
        # An example workflow configuration

        name: Publish and share Kedro Viz # The name of your workflow
        
        permissions:
            contents: write # These are the minimum permissions required to use the action

        on: # This can be configured based on your requirements (i.e., the workflow trigger condition)
            pull_request:
            push:
                branches:
                    - main
            workflow_dispatch:

        jobs: # Here we mentioned the minimal setup
            deploy:
                runs-on: ubuntu-latest # The action is currently tested on ubuntu-latest (Recommended)
                steps:
                    - name: Fetch the repository
                      uses: actions/checkout@v4
                    - name: Set up Python
                      uses: actions/setup-python@v5
                      with:
                        python-version: 3.11 # Requires python >= 3.9
                    - name: Install Project Dependencies # This installs the Kedro-project dependencies
                      run: |
                        python -m pip install --upgrade pip
                        pip install -r requirements.txt
                    - name: Deploy Kedro-Viz to GH Pages # Using the action
                      uses: ravi-kumar-pilla/shareableviz-action@v1     
    ```

## Test the action

After you've completed the configuration, trigger the workflow as per the workflow trigger condition.

- The GitHub workflow `Publish and share Kedro Viz` should start with your commit message
- Once the workflow is successfully completed, the artifacts of your Kedro-Viz static site will be uploaded to the `publish-branch` input specified to the action. Defaults to `gh-pages`.
- If you have configured GitHub Pages for your repository, you can access the static site at `http://<username>.github.io/<repo-name>`

## License

shareableviz-action is licensed under the [Apache 2.0](https://github.com/ravi-kumar-pilla/shareableviz-action/blob/main/LICENSE.md) License.